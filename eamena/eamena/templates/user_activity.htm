{% extends "base.htm" %}
{% load i18n %}
{% load staticfiles %}
{% block css %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/plugins/bootstrap-slider.min.css' %}">
{% endblock css%}
{% block javascript%}
    <script type="text/javascript" src="//d3js.org/d3.v3.min.js"></script>
    <script>
        activitySummary = {{activity_summary|safe}}
        
    </script>
    {{ block.super }}
{% endblock javascript%}
{% block content %}
<div class="container activity-chart">
    <h3>{{head_text}}</h3>
    <div class="row">
        <button type="button" class="btn btn-primary dropdown-toggle dropdown-actions-button" data-toggle="dropdown">
            Users Actions
            <i class="fa fa-chevron-down"></i>
        </button>
        <ul class="dropdown-menu dropdown-actions-menu" role="menu">
            <li><a href="javascript:void(0);" class="select-action" data-action="create">Created resources</a></li>
            <li><a href="javascript:void(0);" class="select-action" data-action="update">Updated resources</a></li>
            <li><a href="javascript:void(0);" class="select-action" data-action="insert">Inserted resources</a></li>
            <li><a href="javascript:void(0);" class="select-action" data-action="delete">Deleted resources</a></li>
        </ul>
        <div id="user-chart"></div>
    </div>
    <div class="row">
    </br>
        {% for edit in activity%}
            <h3 id="date-{{edit.date}}">{{edit.date}}</h3>
            
                <h4>{% if edit.resourceid %}
                    <a href="/resources/HERITAGE_RESOURCE_GROUP.E27/default/{{edit.resourceid}}">{{edit.name}}</a>
                    {% else %}
                    <p>{{edit.name}}</p>
                    {% endif %}
                </h4>
            {% for field in edit.log%}
            {% if field.edittype == 'update'%}
                <div class="arches-timeline-icon edited">
                    <i class="fa fa-pencil"></i>
                </div>
            {% endif %}
            {% if field.edittype == 'insert'%}
                <div class="arches-timeline-icon added">
                    <i class="fa fa-plus"></i>
                </div>
            {% endif %}
            {% if field.edittype == 'create'%}
                <div class="arches-timeline-icon">
                    <i class="fa fa-check"></i>
                </div>
            {% endif %}
            {% if field.edittype == 'delete'%}
                <div class="arches-timeline-icon deleted">
                    <i class="fa fa-minus"></i>
                </div>
            {% endif %}

                <div>{{field.edittype}} <strong>{{field.attributeentitytypeid}}</strong></div>
                <div>
                    {% if field.edittype == 'update'%}
                        from {{field.oldvalue}} to
                    {% endif %}
                    {{field.newvalue}}
                </div>
            {% endfor %}
            <br><br>
        {% endfor %}
    </div>
</div>
{% endblock content %}
